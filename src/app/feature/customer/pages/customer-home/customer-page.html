<div class="flex justify-between items-center mb-4">
  <h2 class="text-2xl text-gray-700 font-bold">
    Clientes
  </h2>

  <button pButton type="button" size="small" (click)="openSaveCustomerDlg()">
    <i class="ti ti-plus text-lg"></i>
    Nuevo Cliente
  </button>
</div>

<div class="bg-white rounded-lg pt-2 border border-gray-300 shadow">
  <p-table [value]="customers()"
           [paginator]="true"
           paginatorStyleClass="flex! justify-end!"
           [rows]="rows"
           [first]="first"
           [showCurrentPageReport]="true"
           [tableStyle]="{ 'min-width': '50rem' }"
           currentPageReportTemplate="{first} â€“ {last} de {totalRecords}"
           (onPage)="pageChange($event)"
           [rowsPerPageOptions]="[10, 25, 50]">
    <ng-template #header>
      <tr>
        <th class="font-bold!">Tipo</th>
        <th class="font-bold!">Cliente</th>
        <th class="font-bold!">Documento</th>
        <th class="font-bold!">Correo electronico</th>
        <th class="font-bold!">Telefono</th>
        <th class="font-bold!">Celular</th>
        <th class="font-bold!">Activo</th>
        <th class="font-bold!">Acciones</th>
      </tr>
    </ng-template>
    <ng-template #body let-customer>
      <tr>
        @if (customer.partnerType === 'PERSON') {
          <td>Persona</td>
        } @else {
          <td>Empresa</td>
        }

        @if (customer.partnerType === 'PERSON') {
          <td>{{ customer.firstName }} {{ customer.lastName }}</td>
        } @else {
          <td>{{ customer.legalName | uppercase }}</td>
        }

        @if (customer.documentTypeId === 1) {
          <td>DNI {{ customer.documentNumber }}</td>
        } @else {
          <td>RUC {{ customer.documentNumber }}</td>
        }

        <td>{{ customer.email }}</td>
        <td>{{ customer.phone }}</td>
        <td>{{ customer.mobile }}</td>

        <td>
          @if (customer.active) {
            <p-tag severity="success" value="Activo"/>
          } @else {
            <p-tag severity="danger" value="Inactivo"/>
          }
        </td>

        <td>
          <button type="button"
                  pButton text
                  size="small"
                  rounded
                  (click)="openSaveCustomerDlg(customer)">
            <i class="ti ti-pencil text-xl"></i>
          </button>

          <button type="button"
                  pButton text
                  size="small"
                  rounded
                  severity="danger"
                  (click)="confirmDeactivateCustomer(customer)">
            <i class="ti ti-trash text-xl"></i>
          </button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<p-confirm-dialog/>

